<h1 id="working-with-ddl-in-a-db2-cicd-expert-environment">Working with DDL in a Db2 CI/CD Expert environment</h1>

<p>Db2 Developer Extension integrates with IBM Db2 CI/CD Expert for z/OS to enable you to make changes to existing DDL, validate those changes by using the existing site rules, and run a change impact report to analyze and verify the changes before submitting a pull request from your UMS environment.</p>

<h2 id="before-you-begin">Before you begin</h2>

<p>You must have a valid connection to an existing Db2 CI/CD Expert for z/OS server.</p>

<h2 id="associating-an-application-and-making-changes-to-ddl">Associating an application and making changes to DDL</h2>

<p>To make changes to an existing DDL file, associate the DDL file with an application in a Db2 CI/CD Expert server:</p>

<ol>
  <li>
    <p>Select a <strong>.ddl</strong> file.</p>
  </li>
  <li>
    <p>In the VS Code <strong>Status Bar</strong>, click <strong>No Db2 CI/CD Expert server</strong>.</p>

    <p><img src="/Aparna-Ashokan/Db2-developer-extension-staging/assets/images/cicde-no-server-connection.png" alt="VS code status bar indicating no server connection" /></p>
  </li>
  <li>
    <p>Select the server that contains the application that needs to be associated with the DDL file.</p>

    <p>Application discovery starts. If the DDL file is found in any of the applications in the server, the DDL file is associated with that server and the <strong>No Db2 CI/CD Expert server</strong> indicator updates to <strong>ServerName &gt; Application &gt; ApplicationName</strong>.</p>

    <p><img src="/Aparna-Ashokan/Db2-developer-extension-staging/assets/images/cicde-with-server-connection.png" alt="VS code status bar indicating server connection with application" /></p>
  </li>
  <li>
    <p>Edit the DDL file with any changes that you need to make for the application.</p>
  </li>
  <li>
    <p>Save your changes.</p>
  </li>
</ol>

<p>If any site rule violations are reported when you save your changes, you should fix them before continuing. However, if these site rule violations occurred while you were editing the DDL they can be ignored. For more information, see <a href="https://www.ibm.com/docs/en/dcefz/1.1.0?topic=features-managing-site-rules">Managing site rules</a>.</p>

<h2 id="running-a-change-impact-report">Running a change impact report</h2>

<p>After you’ve made changes to the DDL file, you can run an impact report to see how the changes will affect the objects that the application depends on.</p>

<p>To run a change impact report, select the <strong>.ddl</strong> file that you modified, then right-click and select <strong>Run CI/CD Expert Impact Report</strong> or click the <strong>CI/CD Expert Impact Report</strong> icon.</p>

<p><img src="/Aparna-Ashokan/Db2-developer-extension-staging/assets/images/impact-report-icon.png" alt="Impact report icon" /></p>

<p>This action submits a job to the Db2 CI/CD Expert server with the modified DDL and the associated application ID. Note that it can take a while for the job to run. By default, Db2 Developer Extension will attempt to fetch the impact report every 2 seconds for a maximum of 100 attempts. To change these default settings:</p>

<ol>
  <li>
    <p>Click the <strong>Manage</strong> icon at the lower left corner of the VS Code window.</p>
  </li>
  <li>
    <p>Click <strong>Settings</strong> &gt; <strong>Extensions</strong> &gt; <strong>IBM Db2 for z/OS Developer Extension</strong>, and locate the <strong>Fetch Interval</strong> and <strong>Max Number of Fetch Attempts</strong> fields:</p>
  </li>
</ol>

<p><img src="/Aparna-Ashokan/Db2-developer-extension-staging/assets/images/fetch-config-settings.png" alt="Fetch configuration settings" /></p>

<ul>
  <li>
    <p>Use the <strong>Fetch Interval</strong> option to specify a number in seconds to indicate how often a call is sent to the Db2 CI/CD Expert server to fetch the impact report until the job is complete. Depending on the size of your application you can increase the number to your preferred value. Increasing the interval between fetch attempts is helpful for larger applications where you might not want to make fetch requests as often.</p>
  </li>
  <li>
    <p>Use the <strong>Max Number of Fetch Attempts</strong> option to specify a number to indicate the maximum number of attempts to fetch the impact report. When the maximum number of attempts is reached, no more attempts will be made to fetch the impact report.</p>
  </li>
</ul>

<p>After the job is completed, the <strong>Changes impact report</strong> view is displayed. The changes made to the DDL are displayed in these tabs:</p>

<ul>
  <li>
    <p>The <strong>Critical changes</strong> tab shows changes that altered the existing structure of an object in the application such as dropping and re-creating an existing table.</p>
  </li>
  <li>
    <p>The <strong>All changes</strong> tab shows all of the changes made to any of the objects in the DDL.</p>
  </li>
  <li>
    <p>The <strong>Full report</strong> tab shows all of the objects in the DDL including objects with critical changes, non-critical changes, and objects with no changes.</p>
  </li>
</ul>

<p><img src="/Aparna-Ashokan/Db2-developer-extension-staging/assets/images/changes-impact-report.png" alt="Changes impact report view" /></p>

<p>After you’ve finished making changes to the DDL and verified the changes in the impact report, you can submit a pull request from UMS.</p>
